---
title: "Codeblock Testing"
date: "08-11-2025"
description: "First post from my writings"
published: true
---

```ts title="sum.ts" {1}
export function sum(a: number, b: number) {
  return a + b;
}
```

```ts
export function calculateTotal(items: number[]) {
  const subtotal = items.reduce((a, b) => a + b, 0);
  const tax = subtotal * 0.1;
  const total = subtotal + tax;
  return total;
}
```

```diff
-export function login(user) {
-  return api.login(user)
-}
+export async function login(user) {
+  return await api.login(user)
+}
```

```tsx title="sum.ts"
import { useEffect, useState } from "react";

export default function Example() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    console.log("mounted");
    return () => console.log("unmounted");
  }, []);

  return <button onClick={() => setCount((c) => c + 1)}>Count: {count}</button>;
}
```

```tsx title="app/page.tsx"
"use client";
import { experimental_useObject as useObject } from "@ai-sdk/react";
import { codeBlockSchema } from "@/app/api/codegen/route";
import {
  Input,
  PromptInputTextarea,
  PromptInputSubmit,
} from "@/components/ai-elements/prompt-input";
import {
  CodeBlock,
  CodeBlockCopyButton,
} from "@/components/ai-elements/code-block";
import { useState } from "react";
export default function Page() {
  const [input, setInput] = useState("");
  const { object, submit, isLoading } = useObject({
    api: "/api/codegen",
    schema: codeBlockSchema,
  });
  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (input.trim()) {
      submit(input);
    }
  };
  return (
    <div className="max-w-4xl mx-auto p-6 relative size-full rounded-lg border h-[600px]">
      <div className="flex flex-col h-full">
        <div className="flex-1 overflow-auto mb-4">
          {object?.code && object?.language && (
            <CodeBlock
              code={object.code}
              language={object.language}
              showLineNumbers={true}
            >
              <CodeBlockCopyButton />
            </CodeBlock>
          )}
        </div>
        <Input
          onSubmit={handleSubmit}
          className="mt-4 w-full max-w-2xl mx-auto relative"
        >
          <PromptInputTextarea
            value={input}
            placeholder="Generate a React todolist component"
            onChange={(e) => setInput(e.currentTarget.value)}
            className="pr-12"
          />
          <PromptInputSubmit
            status={isLoading ? "streaming" : "ready"}
            disabled={!input.trim()}
            className="absolute bottom-1 right-1"
          />
        </Input>
      </div>
    </div>
  );
}
```

